<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% load static %}

    <link href="https://fastly.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'aisearchbot/common/css/styles.css' %}" />
    <link rel="stylesheet" href="{% static 'common/css/navbar.css' %}" />
    <link rel="stylesheet" href="{% static 'aisearchbot/authentication/css/verify_code.css' %}" />
    <!-- <link rel="stylesheet" href="{% static 'common/css/bootstrap.min.css' %}"> -->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="{% static 'aisearchbot/common/images/favicon.svg' %}" />
    
    <title>ASB Verify Code</title>
</head>
<body class="min-vh-100 position-relative d-flex flex-column align-items-center">
    {% include 'include/abs-navbar.html' %}
    <section class="w-100 h-custom">
        <div class="container-fluid h-100">
            <div class="row d-flex justify-content-center align-items-center h-100 pt-5 pb-5">
                <div class="col-md-8 col-lg-6 col-xl-4 login-form-container">
                    <div class="login-form-content">
                        <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M60 120C93.1371 120 120 93.1371 120 60C120 26.8629 93.1371 0 60 0C26.8629 0 0 26.8629 0 60C0 93.1371 26.8629 120 60 120Z" fill="#0079FB" fill-opacity="0.05"/>
                            <path d="M60.2697 109.581C87.5038 109.581 109.581 87.5038 109.581 60.2697C109.581 33.0356 87.5038 10.958 60.2697 10.958C33.0356 10.958 10.958 33.0356 10.958 60.2697C10.958 87.5038 33.0356 109.581 60.2697 109.581Z" fill="#006DEF" fill-opacity="0.1"/>
                            <path d="M48.4635 25.4735C51.5475 24.1642 54.9505 23.7989 58.2422 24.4237C61.5339 25.0486 64.5663 26.6355 66.956 28.9839C69.3458 31.3322 70.9855 34.3364 71.6678 37.6167C72.35 40.8969 72.0443 44.3058 70.7891 47.4122C69.534 50.5187 67.3858 53.1832 64.6163 55.0687C61.8468 56.9543 58.5804 57.9762 55.2301 58.0053C51.8797 58.0344 48.5961 57.0693 45.7942 55.2321C42.9924 53.3949 40.7983 50.7682 39.4894 47.684C37.7424 43.5478 37.7059 38.8878 39.3879 34.7247C41.07 30.5617 44.3335 27.235 48.4635 25.4735ZM58.1583 48.3981C59.6065 47.7879 60.8411 46.7618 61.706 45.4498C62.571 44.1377 63.0273 42.5986 63.0173 41.0272C63.0073 39.4558 62.5314 37.9226 61.6499 36.6217C60.7684 35.3207 59.5208 34.3105 58.065 33.7188C56.6092 33.127 55.0106 32.9804 53.4714 33.2974C51.9322 33.6144 50.5217 34.3808 49.4182 35.4996C48.3147 36.6185 47.5678 38.0395 47.2721 39.5829C46.9764 41.1263 47.1451 42.7227 47.7569 44.1702C48.5795 46.1069 50.1356 47.6389 52.0849 48.4312C54.0341 49.2235 56.2178 49.2116 58.1583 48.3981Z" fill="black"/>
                            <path d="M72.0178 88.8436L77.9387 86.3364L61.8106 48.2487L55.8897 50.7559L72.0178 88.8436Z" fill="black"/>
                            <path d="M68.2905 95.7452L79.3923 91.0215L76.8753 85.1058L65.7734 89.8295L68.2905 95.7452Z" fill="black"/>
                            <path d="M65.1004 87.6347L75.5491 83.2124L73.0429 77.291L62.5942 81.7133L65.1004 87.6347Z" fill="black"/>
                            <path d="M60.5316 76.9068L69.6526 73.0464L67.1464 67.125L58.0254 70.9854L60.5316 76.9068Z" fill="black"/>
                            <path d="M94.0048 89.0208L91.8644 89.3949L91.383 91.4803L90.9016 89.3949L88.7612 89.0208L90.893 88.5433L91.383 86.5693L91.873 88.5433L94.0048 89.0208Z" fill="#006DEF"/>
                            <path d="M30.4045 75.3847L28.2641 75.7509L27.7827 77.8442L27.3013 75.7509L25.1609 75.3847L27.2927 74.8992L27.7827 72.9253L28.2727 74.8992L30.4045 75.3847Z" fill="#006DEF"/>
                            <path d="M42.5009 25.4712L40.3605 25.8373L39.8791 27.9226L39.4063 25.8373L37.2573 25.4632L39.3977 24.9856L39.8791 23.0117L40.3691 24.9856L42.5009 25.4712Z" fill="#006DEF"/>
                            <path d="M90.0196 81.8784L88.8248 82.0854L88.5583 83.2554L88.2918 82.0854L87.0884 81.8784L88.2832 81.6078L88.5583 80.5015L88.8248 81.6078L90.0196 81.8784Z" fill="#006DEF"/>
                            <path d="M98.297 58.6131L97.1021 58.8201L96.8356 59.9901L96.5692 58.8201L95.3657 58.6131L96.5606 58.3425L96.8356 57.2441L97.1107 58.3425L98.297 58.6131Z" fill="#006DEF"/>
                            <path d="M86.2132 27.6763L85.0184 27.8832L84.7519 29.0453L84.4768 27.8832L83.282 27.6763L84.4768 27.4057L84.7519 26.2993L85.0184 27.4057L86.2132 27.6763Z" fill="#006DEF"/>
                            <path d="M48.9557 98.9043L47.7608 99.1113L47.4858 100.273L47.2193 99.1113L46.0244 98.9043L47.2193 98.6337L47.4858 97.5273L47.7608 98.6337L48.9557 98.9043Z" fill="#006DEF"/>
                            <path d="M23.7523 78.1069L22.5574 78.3139L22.2824 79.4839L22.0159 78.3139L20.821 78.1069L22.0159 77.8363L22.2824 76.73L22.5574 77.8363L23.7523 78.1069Z" fill="#006DEF"/>
                            <path d="M25.6163 45.7119L24.4129 45.9189L24.1464 47.0889L23.8799 45.9189L22.6851 45.7119L23.8713 45.4413L24.1464 44.335L24.4215 45.4413L25.6163 45.7119Z" fill="#006DEF"/>
                            <path d="M86.6731 88.9302C86.5901 88.9423 86.5146 88.9814 86.46 89.0405C86.4055 89.0996 86.3755 89.1748 86.3755 89.2525C86.3755 89.3303 86.4055 89.4055 86.46 89.4646C86.5146 89.5237 86.5901 89.5628 86.6731 89.5749C86.756 89.5628 86.8315 89.5237 86.8861 89.4646C86.9406 89.4055 86.9706 89.3303 86.9706 89.2525C86.9706 89.1748 86.9406 89.0996 86.8861 89.0405C86.8315 88.9814 86.756 88.9423 86.6731 88.9302Z" fill="#006DEF"/>
                            <path d="M43.2552 91.438C43.1981 91.4479 43.1465 91.4761 43.1094 91.5175C43.0723 91.5589 43.052 91.611 43.052 91.6648C43.052 91.7186 43.0723 91.7708 43.1094 91.8122C43.1465 91.8536 43.1981 91.8817 43.2552 91.8917C43.3123 91.8817 43.3639 91.8536 43.401 91.8122C43.4381 91.7708 43.4584 91.7186 43.4584 91.6648C43.4584 91.611 43.4381 91.5589 43.401 91.5175C43.3639 91.4761 43.3123 91.4479 43.2552 91.438Z" fill="#006DEF"/>
                            <path d="M35.5798 87.2583C35.4162 87.2755 35.2651 87.348 35.1554 87.4617C35.0457 87.5755 34.9851 87.7226 34.9851 87.8751C34.9851 88.0276 35.0457 88.1748 35.1554 88.2886C35.2651 88.4024 35.4162 88.4748 35.5798 88.492C35.7435 88.4748 35.8945 88.4024 36.0042 88.2886C36.1139 88.1748 36.1745 88.0276 36.1745 87.8751C36.1745 87.7226 36.1139 87.5755 36.0042 87.4617C35.8945 87.348 35.7435 87.2755 35.5798 87.2583Z" fill="#006DEF"/>
                        </svg>                            
                        <h1>Verification Code</h1>
                        <span>Enter a code we have sent to {{email}}.</span>
                        <span id='varification_email' class='d-none'>{{email}}</span>
                    </div>
                    <form class="w-100" method="post"  id="verify-code-form">
                        {% csrf_token %}
                        {% if messages %}
                            {% for message in messages %}
                                <div class="alert {{message.tags}} alert-dismissible fade show d-flex index w-25 mt-4 w-100" role="alert">
                                    {% if message.tags == 'alert-danger' %}
                                    <svg class="me-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#842029" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                                    </svg>
                                    {% else %}
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 34 34" fill="none">
                                        <path d="M17 0.6875C13.7737 0.6875 10.6198 1.64421 7.93727 3.43665C5.25469 5.22909 3.16388 7.77676 1.92922 10.7575C0.694568 13.7382 0.371526 17.0181 1.00095 20.1824C1.63037 23.3467 3.18398 26.2533 5.46533 28.5347C7.74667 30.816 10.6533 32.3696 13.8176 32.9991C16.9819 33.6285 20.2618 33.3054 23.2425 32.0708C26.2232 30.8361 28.7709 28.7453 30.5634 26.0627C32.3558 23.3802 33.3125 20.2263 33.3125 17C33.3125 12.6737 31.5939 8.52451 28.5347 5.46532C25.4755 2.40613 21.3264 0.6875 17 0.6875ZM25.8594 10.745L15.7006 22.3606C15.6479 22.4206 15.583 22.4687 15.5103 22.5017C15.4376 22.5347 15.3586 22.5518 15.2788 22.5519C15.1551 22.5531 15.0345 22.5136 14.9356 22.4394L8.22501 17.2756C8.16628 17.2306 8.11701 17.1744 8.08 17.1103C8.04298 17.0462 8.01896 16.9754 8.0093 16.902C7.99963 16.8286 8.00452 16.7541 8.02368 16.6826C8.04283 16.6111 8.07589 16.544 8.12094 16.4853C8.16601 16.4266 8.22219 16.3773 8.28629 16.3403C8.3504 16.3033 8.42116 16.2793 8.49455 16.2696C8.56794 16.2599 8.64251 16.2648 8.71401 16.284C8.78551 16.3031 8.85253 16.3362 8.91126 16.3812L15.2 21.2244L25.01 9.97437C25.0588 9.9186 25.118 9.87298 25.1844 9.84011C25.2508 9.80725 25.323 9.78777 25.3969 9.78281C25.4708 9.77785 25.545 9.78749 25.6152 9.81119C25.6853 9.83489 25.7502 9.87218 25.8059 9.92094C25.8617 9.96969 25.9073 10.029 25.9402 10.0953C25.9731 10.1617 25.9925 10.2339 25.9975 10.3078C26.0025 10.3817 25.9928 10.4559 25.9691 10.5261C25.9454 10.5963 25.9081 10.6611 25.8594 10.7169V10.745Z" fill="#28A745"/>
                                    </svg>
                                    {% endif %}
                                    {{ message }}
                                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                </div>
                            {% endfor %}
                        {% endif %}
                        <div class="login-input-group">
                            <div class="code-inputs">
                                <input id='input1'  placeholder="•" name="code1" type='text' maxLength="1" required />
                                <input id='input2'  placeholder="•" name="code2" type='text' maxLength="1" required />
                                <input id='input3'  placeholder="•" name="code3" type='text' maxLength="1" required />
                                <input id='input4'  placeholder="•" name="code4" type='text' maxLength="1" required />
                                <input id='input5'  placeholder="•" name="code5" type='text' maxLength="1" required />
                                <input id='input6'  data-position="last" placeholder="•" name="code6" type='text' maxLength="1" required />
                            </div>
                            <div class="error-div">
                                <small class="verify-error-msg input-error-msg"></small>
                            </div>
                        </div>
                        <div class="login-btn-container">
                            <button class="login-btn" type = "submit">
                                <span class="spinner-border spinner-border-md hide" role="status" aria-hidden="true"></span>
                                <span class="btn-text">Continue</span>
                            </button>
                            <span>Didn't recieve any code? 
                                <a href="javascript:void(0);" id='resendLink' onclick="resendOTP();">Resend Code
                                    <span class="spinner-border spinner-border-sm hide" id="resend-btn-loader" role="status" aria-hidden="true"></span>
                                </a>
                            </span>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </section>

    {{forgot_email|json_script:"forgot_email"}}

    <script src="https://fastly.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
      <!-- <script src="{% static 'common/js/bootstrap.bundle.min.js' %}"></script> -->
</body>
<script>
    let forgot_email = JSON.parse(document.getElementById('forgot_email').textContent);
</script>
<script src="{% static 'aisearchbot/authentication/js/resendCode.js' %}"></script>
</html>